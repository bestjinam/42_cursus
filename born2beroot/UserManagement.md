# Root == SuperUser
운영체제에서 무엇이든 할 수 있는 유저. 
Os의 구성 프로그램, 설정 파일 대부분 소유하므로 쉽게 변경 할 수 있다. 

## 일반 유저와의 차이 

- UID
	- root : 0
	- etc : 정수 (500 ~)
- 프로 세스 조작
	- root : 모든 프로세스 
	- etc : 자신의 프로세스 
- 파일 접근 권한
	- root : 무시 가능 
	- etc : 정책 적용 가능 
- TCP/IP 포트 
	- root : 모두 가능 
	- etc : 1024 이후 포트만 가능 
- 시스템 종료 지시 등 
	- root : 가능 
	- 불가능 

## 절대적인 힘 ? 좋은건가? 
- 강한 힘에는 강한 책임이 따름! 한번의 실수로 모든것을 불질러 버릴 수 있기 때문에 조심할 것 
- 또한, root 가 한 일은 로그에 남지 않음 -> 악의적인 행동에 대한 기록을 남길 수 없고 확인도 할 수 없음 

## root 권한 사용하는 법 

### su 
- 현 사용자를 로그아웃 하지 않고, 다른 사용자권한을 획득한다. 
- su root , su - 
	- su & su root : 현재 사용자의 모든 환경변수를 유지하고 사용자만 변경 
	- su - : 완전히 새로운 사용자환경을 만든다. 
	

# SuperUser Do (sudo) ? 
위와 같이 root 권한 남용으로 인한 부작용을 막으면서도, root 권한을 사용할 수 있게 해야할 필요가 있음
즉 root 가 아닌 사용자가 root 권한을 잠시 빌려 root만이 할 수 있는 작업을 수행하도록 할 필요가 있음
sudo는 권한이 있는 일반 사용자가 root 권한으로 작업을 할 수 있도록 하는 프로그램이다. 
sudo는 root 계정의 비밀번호를 묻지 않고, 개별 사용자의 비밀번호로 root 권한을 사용할 수 있게 한다. 
그래서 root 계정의 접근 보호를 할 수 있고, sudo 를 이용한 명령어는 모두 로그에 남기게 한다. 

## sudo 사용법 
- sudo 그룹 만들어서 특정한 유저를 sudo 그룹에 포함 시켜야 한다. 
	- sudo usermod -aG sudo <user name> 
	- 확인 : getent group sudo  + sudo whoami(root 로 나와야함)

## sudo 환경 설정 
-  /etc/sudoers 
	- 기본 보안 정책 플러그인
- sudo visudo
	- 편집기로 위 파일을 수정할 경우, 수정 시 문법 오류 등이 생기면 권한이 꼬여서 다시 수정 할 수 없는 문제가 생길 수 있다. 
	이런 문제들을 방지 하기 위해서 존재하는 프로그램으로, 수정 후 저장 전에 문법을 체크해준다. 
- 수정할 정책 
	- 패스워드 실패시 3번까지 시도 가능 
	- 인증 실패시 출력할 에러 메시지 
	- 잘못된 비밀번호 입력시 에러메시지 
	- sudo 명령어 실행시 입력된 명령어를 log 로 저장 
	- sudo 명령어 실행시 출력 결과를 log로 저장 
	- 사용자 정의 로그 디렉토리 설정 
		- seq가 지원 되며, 36진수로 되어있고, 두자리씩 끊어서 디렉토리 구조를 만든다. 000001 -> 00/00/01
	- tty 를 할당 받지 않은 shell 은 sudo를 사용하지 못하게 함.
- secure_path 에 /snap/bin 추가 하기 
	- secure_path는 해킹을 방지 하기 위한 보안 기능이다.
	- sudo 명령을 실행할 때 사용하는 가상 쉘의 PATH 정보를 설정함. 
	- 이는 sudo 명령을 실행할 때 현재 계정의 shell 이 아닌 새로운 shell을 생성하고 그 안에서 명령을 실행하는데, 
	- 이때 명령을 찾을 경로를 나열한 환경 변수인 path 값을 secure_shell이라고 한다. 

